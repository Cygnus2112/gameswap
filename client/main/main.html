<section ng-controller='MainController as main'>
  <header class='jumbotron no-head-space'>
    <div class='row nav head-space-md foot-space-sm'>
      <div class='col-md-1'></div>
      <div class='col-md-2'>GameSwap</div>
      <a class='col-md-offset-6 col-md-1' ui-sref='signin'>  Sign In  </a>
      <a class='col-md-1' ui-sref='userprofile'>  List a Swap  </a>
      <div class='col-md-1'></div>
    </div>

    <h2 class='col-md-offset-2 col-md-8 head-space-xl foot-space-sm text-center'>
      Get the game you want, for the game you have.
    </h2>

    <form name='searchForm' class='foot-space-lg col-md-offset-3 col-md-6' ng-submit='searchForm.$valid && main.searchOfferings(game)' novalidate>
      <div class='form-group'>
          <input class='form-control' type='text' ng-model='game' placeholder='What game do you want?' required/>
      </div>
    </form>

  </header>

  <div class='container-fluid'>
    <div ng-if='!main.token && main.results.length | orderBy:"[game.platform]"'>
      <div class='text-center' ng-show='main.hasPlaystation === true'>
        There are
        {{main.psGames.length}}
        gamers who want to swap
        {{main.psGames[0].title}}
        ({{main.psGames[0].platform}}).
      </div>
      <div class='col-md-4 text-center' ng-show='main.hasPlaystation === true'>
        <img class='boxart' ng-src='{{main.psGames[0].thumbnail}}'>
        <br>
        <button ng-click='main.displayPlaystation()'>PS4</button>
        <button ng-click='main.displayXbox()'>Xbox One</button>
      </div>
      <div class='text-center' ng-show='main.hasXbox === true'>
        There are
        {{main.xboxGames.length}}
        gamers who want to swap
        {{main.xboxGames[0].title}}
        ({{main.xboxGames[0].platform}}).
      </div>
      <div class='col-md-4 text-center' ng-show='main.hasXbox === true'>
        <img class='boxart' ng-src='{{main.xboxGames[0].thumbnail}}'>
        <br>
        <button ng-click='main.displayPlaystation()'>PS4</button>
        <button ng-click='main.displayXbox()'>Xbox One</button>
      </div>
      <div class='col-md-4'>
        <a class='text-center' ui-sref='signup'>Sign up</a>
      </div>
    </div>
    <div ng-if='main.token && main.swaps.length'>
      <div class='col-md-4 text-center'>
        Username:
        {{main.swaps[0].username}}
        <br>
        <img class='boxart' ng-src='{{main.swaps[0].thumbnail}}'>
        <br>
      </div>
      <div class='col-md-4'>
        <button class='text-center' onclick='main.addRecipient({{main.swaps[0].username}})' ui-sref='messages'>Swap!</button>
      </div>
      <div class='col-md-4 text-center' ng-show='main.hasXbox === true'>
        Username:
        {{main.swaps[1].username}}
        <br>
        <img class='boxart' ng-src='{{main.swaps[1].thumbnail}}'>
        <br>
      </div>
    </div>
    <div class='text-center' ng-if='main.submitted === true && !main.results.length'>Sorry, please try a different game.</div>
  </div>
</section>
